const akeyless = require('akeyless')

const AkeylessClient = new akeyless.ApiClient();
AkeylessClient.basePath = 'https://api.akeyless.io';
const api = new akeyless.V2Api(AkeylessClient)

async function test() {
    try {
        const authResult = await api.auth(akeyless.Auth.constructFromObject({
            "access-key": "...",
            "access-id": "...",
            "accesss-type": "access_key"
        }))
    
        const token = authResult.token

        const data = await api.getSecretValue(akeyless.GetSecretValue.constructFromObject({
            names: ["test"],
            token: token
        }))
        console.log('API called successfully. Returned data: ' + JSON.stringify(data))
        return JSON.stringify(data)
    } catch (e) {
        console.log(JSON.stringify(e, null, 2))
    }
}

test();